#!/usr/bin/env python

"""
This script will add a random emoji to the beginning of your commit message.

To use this script, copy it to your .git/hooks/ directory and rename it to
prepare-commit-msg. Make sure it is executable.

This script need emoji package, you can install it by "pip install emoji".

This script created by Nima Mashhadi M. Reza, you can find him on github:
https://github.com/n25a
"""

import sys
import emoji
import random


commit_msg_filepath = sys.argv[1]

blacklist_emojis = [
    ':kaaba:',
    ':peace_symbol:',
    ':transgender_symbol:',
    ':right_arrow:',
    ':church:',
    ':backhand_index_pointing_up:',
    ':scissors:',
    ':bar_chart:',
    ':Japanese_vacancy_button:',
    ':downwards_button:',
    ':baby_symbol:',
    ':COOL_button:',
    ':person_in_suit_levitating:',
    ':exclamation_question_mark:',
    ':wavy_dash:',
    ':mosque:',
    ':Pisces:',
    ':white_medium-small_square:',
    ':hut:',
    ':Japanese_reserved_button:',
    ':locked_with_key:',
    ':package:',
    ':face_with_tears_of_joy:',
    ':beach_with_umbrella:',
    ':divide:',
    ':Cancer:',
    ':pencil:',
    ':coin:',
    ':globe_showing_Americas:',
    ':family:',
    ':no_pedestrians:',
    ':worm:',
    ':right_anger_bubble:',
    ':grinning_face_with_sweat:',
    ':Japanese_secret_button:',
    ':ATM_sign:',
    ':medical_symbol:',
    ':video_camera:',
    ':grey_heart:',
    ':minus:',
    ':star:',
    ':input_latin_letters:',
    ':purple_circle:',
    ':toilet:',
    ':red_triangle_pointed_up:',
    ':no_mobile_phones:',
    ':school:',
    ':Japanese_no_vacancy_button:',
    ':hot_springs:',
    ':convenience_store:',
    ':wedding:',
    ':Mrs._Claus:',
    ':restroom:',
    ':one-thirty:',
    ':face_with_rolling_eyes:',
    ':globe_showing_Europe-Africa:',
    ':e-mail:',
    ':fast_down_button:',
    ':Leo:',
    ':pause_button:',
    ':smiling_face:',
    ':locked:',
    ':hot_beverage:',
    ':writing_hand:',
    ':wheelchair_symbol:',
    ':shorts:',
    ':no_one_under_eighteen:',
    ':Japanese_acceptable_button:',
    ':Aries:',
    ':non-potable_water:',
    ':input_latin_lowercase:',
    ':Japanese_not_free_of_charge_button:',
    ':record_button:',
    ':atom_symbol:',
    ':red_circle:',
    ':Japanese_passing_grade_button:',
    ':face_vomiting:',
    ':ten_o’clock:',
    ':Virgo:',
    ':rose:',
    ':UP!_button:',
    ':medium-dark_skin_tone:',
    ':backhand_index_pointing_right:',
    ':CL_button:',
    ':eight-pointed_star:',
    ':timer_clock:',
    ':thumbs_down:',
    ':Japanese_service_charge_button:',
    ':down_arrow:',
    ':three-thirty:',
    ':NG_button:',
    ':fast-forward_button:',
    ':wastebasket:',
    ':green_circle:',
    ':counterclockwise_arrows_button:',
    ':part_alternation_mark:',
    ':cross_mark:',
    ':person_with_crown:',
    ':black_square_button:',
    ':A_button_(blood_type):',
    ':no_littering:',
    ':O_button_(blood_type):',
    ':male_sign:',
    ':backhand_index_pointing_down:',
    ':BACK_arrow:',
    ':black_large_square:',
    ':twelve-thirty:',
    ':Gemini:',
    ':Japanese_monthly_amount_button:',
    ':medium_skin_tone:',
    ':fog:',
    ':love_hotel:',
    ':two_o’clock:',
    ':twelve_o’clock:',
    ':crossed_swords:',
    ':AB_button_(blood_type):',
    ':slightly_smiling_face:',
    ':NEW_button:',
    ':post_office:',
    ':baby:',
    ':old_man:',
    ':red_envelope:',
    ':nine_o’clock:',
    ':elevator:',
    ':person_bouncing_ball:',
    ':infinity:',
    ':person_getting_haircut:',
    ':detective:',
    ':up-right_arrow:',
    ':smiling_face_with_hearts:',
    ':medium-light_skin_tone:',
    ':small_orange_diamond:',
    ':person_beard:',
    ':one-piece_swimsuit:',
    ':carousel_horse:',
    ':Japanese_discount_button:',
    ':waxing_crescent_moon:',
    ':pickup_truck:',
    ':red_question_mark:',
    ':person_kneeling:',
    ':oncoming_bus:',
    ':sparkle:',
    ':cross_mark_button:',
    ':purple_square:',
    ':desktop_computer:',
    ':club_suit:',
    ':white_circle:',
    ':right_arrow_curving_left:',
    ':snowman_without_snow:',
    ':rescue_worker’s_helmet:',
    ':up-left_arrow:',
    ':camping:',
    ':calendar:',
    ':person_raising_hand:',
    ':backhand_index_pointing_left:',
    ':antenna_bars:',
    ':glass_of_milk:',
    ':eye:',
    ':bicycle:',
    ':stop_sign:',
    ':motorized_wheelchair:',
    ':dog:',
    ':piñata:',
    ':left_arrow_curving_right:',
    ':black_flag:',
    ':no_entry:',
    ':middle_finger:',
    ':face_with_peeking_eye:',
    ':girl:',
    ':person_bowing:',
    ':speaker_medium_volume:',
    ':Japanese_open_for_business_button:',
    ':slightly_frowning_face:',
    ':crossed_fingers:',
    ':goblin:',
    ':Japanese_congratulations_button:',
    ':water_closet:',
    ':umbrella:',
    ':input_latin_uppercase:',
    ':oil_drum:',
    ':Libra:',
    ':wilted_flower:',
    ':zipper-mouth_face:',
    ':boy:',
    ':Japanese_bargain_button:',
    ':white_hair:',
    ':national_park:',
    ':circled_M:',
    ':triangular_ruler:',
    ':grinning_cat:',
    ':woman’s_sandal:',
    ':funeral_urn:',
    ':black_small_square:',
    ':princess:',
    ':speaking_head:',
    ':bell_with_slash:',
    ':safety_vest:',
    ':factory:',
    ':small_blue_diamond:',
    ':frowning_face:',
    ':star_of_David:',
    ':five_o’clock:',
    ':winking_face_with_tongue:',
    ':five-thirty:',
    ':repeat_button:',
    ':menorah:',
    ':window:',
    ':pile_of_poo:',
    ':sleepy_face:',
    ':women’s_room:',
    ':leftwards_pushing_hand:',
    ':gloves:',
    ':chopsticks:',
    ':weary_face:',
    ':radio_button:',
    ':crying_cat:',
    ':star-struck:',
    ':chart_increasing:',
    ':chains:',
    ':ON!_arrow:',
    ':person_pouting:',
    ':bellhop_bell:',
    ':palm_down_hand:',
    ':potted_plant:',
    ':mobile_phone_off:',
    ':skier:',
    ':metro:',
    ':clipboard:',
    ':white_exclamation_mark:',
    ':diya_lamp:',
    ':woman_dancing:',
    ':pick:',
    ':red_heart:',
    ':sailboat:',
    ':fountain:',
    ':khanda:',
    ':sunglasses:',
    ':ferry:',
    ':hook:',
    ':passport_control:',
    ':cat_face:',
    ':radioactive:',
    ':person_standing:',
    ':heart_exclamation:',
    ':confounded_face:',
    ':copyright:',
    ':diamond_suit:',
    ':prohibited:',
    ':Ophiuchus:',
    ':white_medium_square:',
    ':flatbread:',
    ':blue_circle:',
    ':next_track_button:',
    ':spiral_notepad:',
    ':open_hands:',
    ':vibration_mode:',
    ':mahjong_red_dragon:',
    ':up-down_arrow:',
    ':person_biking:',
    ':crying_face:',
    ':carpentry_saw:',
    ':customs:',
    ':musical_note:',
    ':couch_and_lamp:',
    ':double_exclamation_mark:',
    ':large_blue_diamond:',
    ':military_medal:',
    ':auto_rickshaw:',
    ':men’s_room:',
    ':mobile_phone:',
    ':knot:',
    ':telephone:',
    ':desert:',
    ':registered:',
    ':down-right_arrow:',
    ':old_key:',
    ':reminder_ribbon:',
    ':men_holding_hands:',
    ':face_screaming_in_fear:',
    ':no_smoking:',
    ':eight-thirty:',
    ':recycling_symbol:',
    ':old_woman:',
    ':sun:',
    ':repeat_single_button:',
    ':level_slider:',
    ':motorway:',
    ':brown_circle:',
    ':shuffle_tracks_button:',
    ':Japanese_here_button:',
    ':full_moon:',
    ':small_airplane:',
    ':control_knobs:',
    ':racing_car:',
    ':Scorpio:',
    ':fast_up_button:',
    ':latin_cross:',
    ':cityscape:',
    ':eight-spoked_asterisk:',
    ':index_pointing_up:',
    ':biohazard:',
    ':sparkles:',
    ':Japanese_application_button:',
    ':angry_face:',
    ':snowflake:',
    ':ten-thirty:',
    ':postbox:',
    ':black_nib:',
    ':label:',
    ':face_with_medical_mask:',
    ':om:',
    ':input_symbols:',
    ':bald:',
    ':fast_reverse_button:',
    ':currency_exchange:',
    ':eleven-thirty:',
    ':abacus:',
    ':person_shrugging:',
    ':six_o’clock:',
    ':oncoming_police_car:',
    ':END_arrow:',
    ':grinning_cat_with_smiling_eyes:',
    ':FREE_button:',
    ':computer_mouse:',
    ':raising_hands:',
    ':right_arrow_curving_up:',
    ':SOON_arrow:',
    ':kiss_mark:',
    ':down-left_arrow:',
    ':kissing_face_with_closed_eyes:',
    ':card_file_box:',
    ':lipstick:',
    ':boomerang:',
    ':face_with_symbols_on_mouth:',
    ':light_rail:',
    ':flushed_face:',
    ':train:',
    ':clutch_bag:',
    ':person_wearing_turban:',
    ':person_fencing:',
    ':minibus:',
    ':railway_track:',
    ':smirking_face:',
    ':person_in_bed:',
    ':t-shirt:',
    ':people_with_bunny_ears:',
    ':lion:',
    ':crayon:',
    ':last_quarter_moon:',
    ':enraged_face:',
    ':white_question_mark:',
    ':lying_face:',
    ':people_wrestling:',
    ':person_frowning:',
    ':person_in_tuxedo:',
    ':litter_in_bin_sign:',
    ':shamrock:',
    ':watch:',
    ':coffin:',
    ':white_large_square:',
    ':necktie:',
    ':speaker_high_volume:',
    ':printer:',
    ':anguished_face:',
    ':four_o’clock:',
    ':books:',
    ':black_medium-small_square:',
    ':nail_polish:',
    ':left_luggage:',
    ':OK_button:',
    ':spider:',
    ':person_walking:',
    ':dashing_away:',
    ':trident_emblem:',
    ':kissing_cat:',
    ':crutch:',
    ':skull_and_crossbones:',
    ':film_frames:',
    ':fuel_pump:',
    ':sake:',
    ':stethoscope:',
    ':reverse_button:',
    ':orange_circle:',
    ':vulcan_salute:',
    ':classical_building:',
    ':sled:',
    ':face_with_crossed-out_eyes:',
    ':tent:',
    ':bank:',
    ':shinto_shrine:',
    ':money_with_wings:',
    ':ID_button:',
    ':face_with_thermometer:',
    ':Japanese_prohibited_button:',
    ':fork_and_knife_with_plate:',
    ':play_button:',
    ':yellow_circle:',
    ':smiling_face_with_heart-eyes:',
    ':anchor:',
    ':sneezing_face:',
    ':chair:',
    ':smiling_face_with_sunglasses:',
    ':glasses:',
    ':chart_increasing_with_yen:',
    ':heart_hands:',
    ':mouse_trap:',
    ':potable_water:',
    ':face_with_raised_eyebrow:',
    ':drop_of_blood:',
    ':bust_in_silhouette:',
    ':hole:',
    ':shopping_bags:',
    ':mountain:',
    ':mobile_phone_with_arrow:',
    ':adhesive_bandage:',
    ':grinning_face:',
    ':place_of_worship:',
    ':Japanese_dolls:',
    ':ear:',
    ':Japanese_symbol_for_beginner:',
    ':rainbow:',
    ':newspaper:',
    ':framed_picture:',
    ':hammer_and_pick:',
    ':sport_utility_vehicle:',
    ':warning:',
    ':station:',
    ':relieved_face:',
    ':ticket:',
    ':synagogue:',
    ':curly_loop:',
    ':graduation_cap:',
    ':baseball:',
    ':trade_mark:',
    ':purse:',
    ':white_cane:',
    ':water_pistol:',
    ':last_track_button:',
    ':microphone:',
    ':camera_with_flash:',
    ':cocktail_glass:',
    ':2nd_place_medal:',
    ':rightwards_pushing_hand:',
    ':fleur-de-lis:',
    ':dress:',
    ':guard:',
    ':hollow_red_circle:',
    ':bouquet:',
    ':blue_square:',
    ':roll_of_paper:',
    ':spade_suit:',
    ':baggage_claim:',
    ':admission_tickets:',
    ':rolling_on_the_floor_laughing:',
    ':left-right_arrow:',
    ':carp_streamer:',
    ':information:',
    ':mountain_railway:',
    ':heart_decoration:',
    ':bed:',
    ':tractor:',
    ':high_voltage:',
    ':prayer_beads:',
    ':face_savoring_food:',
    ':long_drum:',
    ':field_hockey:',
    ':plunger:',
    ':automobile:',
    ':banjo:',
    ':bomb:',
    ':bus:',
    ':disappointed_face:',
    ':black_medium_square:',
    ':multiply:',
    ':chart_decreasing:',
    ':thermometer:',
    ':cat_with_tears_of_joy:',
    ':accordion:',
    ':umbrella_on_ground:',
    ':grinning_face_with_smiling_eyes:',
    ':nauseated_face:',
    ':right_arrow_curving_down:',
    ':grimacing_face:',
    ':hotel:',
    ':running_shirt:',
    ':moon_viewing_ceremony:',
    ':troll:',
    ':briefs:',
    ':clockwise_vertical_arrows:',
    ':sun_behind_large_cloud:',
    ':name_badge:',
    ':Japanese_castle:',
    ':yin_yang:',
    ':heavy_equals_sign:',
    ':dotted_six-pointed_star:',
    ':couple_with_heart:',
    ':envelope_with_arrow:',
    ':cat_with_wry_smile:',
    ':chess_pawn:',
    ':seat:',
    ':red_square:',
    ':no_bicycles:',
    ':compass:',
    ':person_in_steamy_room:',
    ':downcast_face_with_sweat:',
    ':smiling_face_with_horns:',
    ':check_box_with_check:',
    ':plus:',
    ':one_o’clock:',
    ':goggles:',
    ':umbrella_with_rain_drops:',
    ':butter:',
    ':hear-no-evil_monkey:',
    ':joker:',
    ':bento_box:',
    ':first_quarter_moon:',
    ':euro_banknote:',
    ':blueberries:',
    ':ladder:',
    ':alembic:',
    ':softball:',
    ':fish_cake_with_swirl:',
    ':hindu_temple:',
    ':white_small_square:',
    ':eject_button:',
    ':pensive_face:',
    ':thought_balloon:',
    ':placard:',
    ':neutral_face:',
    ':cow_face:',
    ':expressionless_face:',
    ':person_blond_hair:',
    ':cinema:',
    ':women_holding_hands:',
    ':red_hair:',
    ':shallow_pan_of_food:',
    ':candle:',
    ':red_exclamation_mark:',
    ':woman_and_man_holding_hands:',
    ':cat:',
    ':smiling_face_with_tear:',
    ':sad_but_relieved_face:',
    ':double_curly_loop:',
    ':footprints:',
    ':roller_coaster:',
    ':green_book:',
    ':persevering_face:',
    ':two-thirty:',
    ':door:',
    ':love_letter:',
    ':hospital:',
    ':man:',
    ':anger_symbol:',
    ':fishing_pole:',
    ':heart_suit:',
    ':dark_skin_tone:',
    ':sleeping_face:',
    ':eleven_o’clock:',
    ':pink_heart:',
    ':black_circle:',
    ':lab_coat:',
    ':taco:',
    ':deaf_person:',
    ':merperson:',
    ':headstone:',
    ':horizontal_traffic_light:',
    ':Taurus:',
    ':parachute:',
    ':waxing_gibbous_moon:',
    ':television:',
    ':muted_speaker:',
    ':waning_crescent_moon:',
    ':P_button:',
    ':card_index:',
    ':violin:',
    ':manual_wheelchair:',
    ':Capricorn:',
    ':check_mark:',
    ':person_tipping_hand:',
    ':cloud:',
    ':person_golfing:',
    ':face_with_open_mouth:',
    ':speaker_low_volume:',
    ':wheel_of_dharma:',
    ':person_facepalming:',
    ':upwards_button:',
    ':linked_paperclips:',
    ':clamp:',
    ':woman’s_clothes:',
    ':nesting_dolls:',
    ':stadium:',
    ':3rd_place_medal:',
    ':american_football:',
    ':love-you_gesture:',
    ':leftwards_hand:',
    ':check_mark_button:',
    ':world_map:',
    ':building_construction:',
    ':wireless:',
    ':castle:',
    ':SOS_button:',
    ':oncoming_automobile:',
    ':weary_cat:',
    ':round_pushpin:',
    ':steaming_bowl:',
    ':heavy_dollar_sign:',
    ':melon:',
    ':musical_keyboard:',
    ':person_swimming:',
    ':bus_stop:',
    ':magic_wand:',
    ':white_square_button:',
    ':spoon:',
    ':pleading_face:',
    ':female_sign:',
    ':face_blowing_a_kiss:',
    ':sun_behind_rain_cloud:',
    ':B_button_(blood_type):',
    ':teapot:',
    ':stop_button:',
    ':woman_with_headscarf:',
    ':snowman:',
    ':grinning_squinting_face:',
    ':fireworks:',
    ':hammer_and_wrench:',
    ':airplane:',
    ':house:',
    ':musical_score:',
    ':bookmark_tabs:',
    ':file_folder:',
    ':credit_card:',
    ':four-thirty:',
    ':orange_square:',
    ':nerd_face:',
    ':light_skin_tone:',
    ':seven_o’clock:',
    ':input_numbers:',
    ':large_orange_diamond:',
    ':play_or_pause_button:',
    ':mouse_face:',
    ':person_surfing:',
    ':Japanese_post_office:',
    ':curry_rice:',
    ':kiss:',
    ':tear-off_calendar:',
    ':waning_gibbous_moon:',
    ':pregnant_person:',
    ':worried_face:',
    ':orthodox_cross:',
    ':green_square:',
    ':studio_microphone:',
    ':video_game:',
    ':desert_island:',
    ':ice_hockey:',
    ':running_shoe:',
    ':performing_arts:',
    ':trackball:',
    ':up_arrow:',
    ':magnifying_glass_tilted_left:',
    ':red_triangle_pointed_down:',
    ':tamale:',
    ':raised_hand:',
    ':cigarette:',
    ':Japanese_free_of_charge_button:',
    ':laptop:',
    ':sparkler:',
    ':motorcycle:',
    ':keycap_10:',
    ':star_and_crescent:',
    ':optical_disk:',
    ':hand_with_index_finger_and_thumb_crossed:',
    ':person_gesturing_NO:',
    ':woman:',
    ':frowning_face_with_open_mouth:',
    ':confused_face:',
    ':Sagittarius:',
    ':tired_face:',
]

emoji_list = []
for e in list(emoji.EMOJI_DATA.keys()):
    if emoji.demojize(e) in blacklist_emojis:
        continue
    if 'flag' not in emoji.demojize(e):
        if len(e) > 1:
            if emoji.is_emoji(e[0]):
                emoji_list.append(e[0])
        else:
            emoji_list.append(e)

emoji_list = list(set(emoji_list))

with open(commit_msg_filepath, 'r+') as f:
    commit_msg = f.read()
    if not emoji.is_emoji(commit_msg):
        index = random.randint(0, len(emoji_list) - 1)
        f.seek(0, 0)
        prefix_emoji = emoji_list[index]
        new_commit_msg = '%s %s' % (prefix_emoji, commit_msg)
        f.write(new_commit_msg)
